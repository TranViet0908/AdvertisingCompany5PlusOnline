<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Tiến trình</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * {
      font-family: 'Inter', sans-serif;
    }
    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    .gradient-text {
      background: linear-gradient(135deg, #667eea 0%, #f093fb 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .card-hover {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .card-hover:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
    }
    .glass-effect {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    .service-card {
      background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .service-card:hover {
      background: linear-gradient(145deg, #f8fafc 0%, #ffffff 100%);
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
    }
    .hero-pattern {
      background-image: radial-gradient(circle at 25% 25%, #667eea 0%, transparent 50%),
                      radial-gradient(circle at 75% 75%, #764ba2 0%, transparent 50%);
    }
    .timeline-line {
      background: linear-gradient(to bottom, #e5e7eb 0%, #e5e7eb 50%, #d1d5db 100%);
    }
  </style>
</head>
<body class="font-sans bg-gray-50">
<div th:replace="~{/user/contracts/_tabs :: tabs('progress')}"></div>

<!-- Header -->
<header class="hero-pattern text-white relative overflow-hidden">
  <div class="absolute inset-0 bg-black/20"></div>
  <div class="container mx-auto px-4 lg:px-8 py-16 relative z-10">
    <div class="max-w-4xl mx-auto text-center">
      <div class="mb-6">
        <i class="fas fa-tasks text-6xl text-white/80 mb-4"></i>
      </div>
      <h1 class="text-4xl md:text-6xl font-bold mb-6 leading-tight">
        Tiến trình dự án
      </h1>
      <p class="text-xl md:text-2xl text-white/90 leading-relaxed max-w-3xl mx-auto">
        Theo dõi mốc công việc, người phụ trách và mức độ hoàn thành một cách chi tiết
      </p>
    </div>
  </div>
</header>

<main class="container mx-auto px-4 lg:px-8 py-16">
  <div class="max-w-6xl mx-auto">
    <div class="text-center mb-12">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
        Timeline <span class="gradient-text">dự án</span>
      </h2>
      <div class="w-24 h-1 bg-gradient-to-r from-blue-500 to-purple-600 mx-auto"></div>
    </div>

    <!-- Empty State -->
    <div th:if="${#lists.isEmpty(steps)}" class="max-w-2xl mx-auto text-center">
      <div class="service-card p-12 rounded-3xl shadow-lg">
        <div class="mb-8">
          <i class="fas fa-project-diagram text-6xl text-gray-300"></i>
        </div>
        <h3 class="text-2xl font-bold text-gray-900 mb-4">Chưa có tiến trình nào</h3>
        <p class="text-gray-600 text-lg leading-relaxed">
          Hiện tại chưa có tiến trình nào được ghi nhận cho dự án của bạn.
          Chúng tôi sẽ cập nhật thông tin sớm nhất có thể.
        </p>
        <div class="mt-8">
          <a href="#contact" class="inline-flex items-center px-8 py-4 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold hover:shadow-xl transition duration-300 transform hover:scale-105">
            <i class="fas fa-phone mr-3"></i>
            Liên hệ để cập nhật
          </a>
        </div>
      </div>
    </div>

    <!-- Timeline -->
    <div th:if="${!#lists.isEmpty(steps)}" class="relative">
      <!-- Timeline Line -->
      <div class="absolute left-8 top-0 bottom-0 w-1 timeline-line rounded-full"></div>

      <!-- Timeline Items -->
      <div class="space-y-12">
        <div th:each="s, iterStat : ${steps}" class="relative">
          <!-- Timeline Dot -->
          <div class="absolute left-4 w-8 h-8 rounded-full border-4 border-white shadow-lg flex items-center justify-center z-10"
               th:class="${s.status == 'completed'} ? 'bg-gradient-to-r from-green-500 to-emerald-600' :
                         ${s.status == 'in_progress'} ? 'bg-gradient-to-r from-blue-500 to-purple-600' :
                         'bg-gradient-to-r from-gray-400 to-gray-500'">
            <i th:class="${s.status == 'completed'} ? 'fas fa-check text-white text-sm' :
                        ${s.status == 'in_progress'} ? 'fas fa-play text-white text-sm' :
                        'fas fa-clock text-white text-sm'"></i>
          </div>

          <!-- Content Card -->
          <div class="ml-20">
            <div class="service-card rounded-3xl shadow-lg overflow-hidden card-hover">
              <div class="p-8">
                <!-- Header -->
                <div class="flex items-start justify-between gap-6 mb-6">
                  <div class="flex-1">
                    <h3 class="text-2xl font-bold text-gray-900 mb-3" th:text="${s.title}">Công việc</h3>
                    <div class="flex items-center text-gray-600 space-x-6">
                      <div class="flex items-center">
                        <i class="fas fa-calendar-alt mr-2 text-blue-500"></i>
                        <span th:text="${#temporals.format(s.date,'dd/MM/yyyy')}">--/--/----</span>
                      </div>
                      <div class="flex items-center">
                        <i class="fas fa-user mr-2 text-purple-500"></i>
                        <span>Phụ trách: <span class="font-semibold" th:text="${s.owner}">Người phụ trách</span></span>
                      </div>
                    </div>
                  </div>
                  <span th:replace="~{/user/contracts/_status-badge :: badge(${s.status})}" class="px-4 py-2 rounded-full text-sm font-semibold"></span>
                </div>

                <!-- Progress Section -->
                <div class="mb-6">
                  <div class="flex justify-between items-center mb-3">
                    <span class="text-lg font-semibold text-gray-900">
                      <i class="fas fa-chart-line mr-2 text-green-500"></i>
                      Tiến độ hoàn thành
                    </span>
                    <span class="text-2xl font-bold text-gray-900" th:text="${s.progress + '%'}">0%</span>
                  </div>
                  <div class="w-full bg-gray-200 rounded-full h-4 overflow-hidden">
                    <div class="h-full bg-gradient-to-r from-blue-500 to-purple-600 rounded-full transition-all duration-500 ease-out"
                         th:style="'width:' + ${s.progress} + '%;'"></div>
                  </div>
                  <div class="flex justify-between text-sm text-gray-500 mt-2">
                    <span>Bắt đầu</span>
                    <span>Hoàn thành</span>
                  </div>
                </div>

                <!-- Description -->
                <div th:if="${s.note}" class="mb-6">
                  <h4 class="text-lg font-semibold text-gray-900 mb-3">
                    <i class="fas fa-sticky-note mr-2 text-orange-500"></i>
                    Mô tả chi tiết
                  </h4>
                  <div class="bg-gradient-to-r from-gray-50 to-gray-100 p-6 rounded-2xl">
                    <p class="text-gray-700 leading-relaxed" th:text="${s.note}"></p>
                  </div>
                </div>

                <!-- Attachment -->
                <div th:if="${s.attachmentUrl}" class="flex items-center justify-center">
                  <a th:href="${s.attachmentUrl}" target="_blank"
                     class="inline-flex items-center px-6 py-3 rounded-full bg-gradient-to-r from-gray-600 to-gray-700 text-white font-semibold hover:shadow-lg transition duration-300 transform hover:scale-105">
                    <i class="fas fa-paperclip mr-3"></i>
                    Xem tài liệu đính kèm
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>

<!-- Footer CTA -->
<section class="py-20 bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900">
  <div class="container mx-auto px-4 lg:px-8">
    <div class="max-w-4xl mx-auto text-center">
      <h2 class="text-3xl md:text-4xl font-bold text-white mb-6">
        Cần cập nhật tiến trình?
      </h2>
      <p class="text-xl text-gray-300 mb-8 leading-relaxed">
        Liên hệ với project manager để được cập nhật tiến trình mới nhất của dự án
      </p>
      <div class="flex flex-col sm:flex-row justify-center gap-4">
        <a href="#contact" class="inline-flex items-center px-8 py-4 rounded-full bg-white text-blue-600 font-semibold hover:bg-gray-100 transition duration-300 transform hover:scale-105">
          <i class="fas fa-user-tie mr-3"></i>
          Liên hệ PM
        </a>
        <a href="#" class="inline-flex items-center px-8 py-4 rounded-full border-2 border-white text-white font-semibold hover:bg-white hover:text-blue-600 transition duration-300 transform hover:scale-105">
          <i class="fas fa-calendar-check mr-3"></i>
          Lịch họp dự án
        </a>
      </div>
    </div>
  </div>
</section>
</body>
</html>